import{c as tn}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{r as c,cA as Ne,bi as nn,bm as gt,cm as sn,cB as rn,cC as he,aL as ln,j as d,aA as et,E as q,C as be,V as Pe,Y as on,o as an,aW as vt,b as oe,cD as W,bu as ue,cE as cn,B as de,cd as un,cc as dn,ck as fn,cl as hn,ci as mn,cg as pn,H as gn,cf as vn,bs as tt,ce as bn,y as wn,X as xn,I as Cn,T as yn}from"./index-nuRy4NPt.js";import{i as Te,a as _n,f as Sn,e as En,c as Mn}from"./_isIndex-BI6gDjko.js";import{f as kn,C as In}from"./index.esm-DEW1DSpk.js";import{c as jn,u as Dn,b as On,f as bt}from"./index-FTuA9u0b.js";import{C as zn}from"./checkbox-Cdth9DF7.js";var An=Object.defineProperty,me=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable,nt=(e,n,t)=>n in e?An(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Nn=(e,n)=>{for(var t in n||(n={}))wt.call(n,t)&&nt(e,t,n[t]);if(me)for(var t of me(n))xt.call(n,t)&&nt(e,t,n[t]);return e},Pn=(e,n)=>{var t={};for(var s in e)wt.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&me)for(var s of me(e))n.indexOf(s)<0&&xt.call(e,s)&&(t[s]=e[s]);return t};const Ct=c.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=Pn(t,["color"]);return c.createElement("svg",Nn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),c.createElement("g",{clipPath:"url(#a)"},c.createElement("path",{fill:s,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),c.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#60A5FA"}),c.createElement("circle",{cx:12.5,cy:2.5,r:2,stroke:s,strokeOpacity:.12})),c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});Ct.displayName="AdjustmentsDone";var Tn=Object.defineProperty,pe=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,st=(e,n,t)=>n in e?Tn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Rn=(e,n)=>{for(var t in n||(n={}))yt.call(n,t)&&st(e,t,n[t]);if(pe)for(var t of pe(n))_t.call(n,t)&&st(e,t,n[t]);return e},Fn=(e,n)=>{var t={};for(var s in e)yt.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&pe)for(var s of pe(e))n.indexOf(s)<0&&_t.call(e,s)&&(t[s]=e[s]);return t};const St=c.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=Fn(t,["color"]);return c.createElement("svg",Rn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),c.createElement("g",{stroke:s,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#a)"},c.createElement("path",{d:"M12.611 7.5h.889M1.5 7.5h8.444M7.722 3.278H13.5M1.5 3.278h3.556M7.722 11.722H13.5M1.5 11.722h3.556M9.944 5.722v3.556M5.056 1.5v3.556M5.056 9.944V13.5"})),c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});St.displayName="Adjustments";var $n=Object.defineProperty,ge=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,rt=(e,n,t)=>n in e?$n(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Gn=(e,n)=>{for(var t in n||(n={}))Et.call(n,t)&&rt(e,t,n[t]);if(ge)for(var t of ge(n))Mt.call(n,t)&&rt(e,t,n[t]);return e},Vn=(e,n)=>{var t={};for(var s in e)Et.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&ge)for(var s of ge(e))n.indexOf(s)<0&&Mt.call(e,s)&&(t[s]=e[s]);return t};const kt=c.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=Vn(t,["color"]);return c.createElement("svg",Gn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),c.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.823-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.924 4.678a.11.11 0 0 0-.056.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.41c.414 0 .78.344.78.759 0 .414-.366.741-.78.741H2.117a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75M9.338 8.72a.75.75 0 0 1 1.06 0l1.623 1.622 1.622-1.622a.75.75 0 1 1 1.06 1.06l-1.621 1.623 1.622 1.622a.75.75 0 0 1-1.06 1.061l-1.623-1.623-1.623 1.623a.75.75 0 0 1-1.06-1.06l1.622-1.623L9.338 9.78a.75.75 0 0 1 0-1.06",clipRule:"evenodd"}),c.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});kt.displayName="TaxExclusive";var Kn=Object.defineProperty,ve=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,lt=(e,n,t)=>n in e?Kn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Wn=(e,n)=>{for(var t in n||(n={}))It.call(n,t)&&lt(e,t,n[t]);if(ve)for(var t of ve(n))jt.call(n,t)&&lt(e,t,n[t]);return e},Bn=(e,n)=>{var t={};for(var s in e)It.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&ve)for(var s of ve(e))n.indexOf(s)<0&&jt.call(e,s)&&(t[s]=e[s]);return t};const Dt=c.forwardRef((e,n)=>{var t=e,{color:s="currentColor"}=t,r=Bn(t,["color"]);return c.createElement("svg",Wn({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:n},r),c.createElement("path",{fill:s,fillRule:"evenodd",d:"M6.713.838a1.61 1.61 0 0 1 1.574 0l4.521 2.531h.001c.507.286.823.823.823 1.407v.356c0 .89-.722 1.611-1.611 1.611l-9.042.001c-.89 0-1.611-.722-1.611-1.611v-.357c0-.582.314-1.12.824-1.406zm.842 1.309a.11.11 0 0 0-.108 0L2.925 4.678a.11.11 0 0 0-.057.097v.357c0 .061.05.111.111.111h9.042c.06 0 .11-.05.11-.112v-.356a.11.11 0 0 0-.056-.098zM2.979 7.396a.75.75 0 0 1 .75.75v3.986h1.514V8.146a.75.75 0 0 1 1.5 0v3.986h.346c.414 0 .812.337.812.75 0 .415-.398.75-.812.75H2.118a.75.75 0 0 1 0-1.5h.111V8.146a.75.75 0 0 1 .75-.75m6.028 0a.75.75 0 0 1 .75.75v1.292a.75.75 0 0 1-1.5 0V8.146a.75.75 0 0 1 .75-.75m5.588.733a.75.75 0 0 1 .2 1.042l-3.215 4.736a.75.75 0 0 1-1.16.1l-1.522-1.579a.75.75 0 0 1 1.08-1.041l.88.913 2.695-3.971a.75.75 0 0 1 1.042-.2",clipRule:"evenodd"}),c.createElement("path",{fill:s,d:"M7.5 4.701a.861.861 0 1 0 0-1.722.861.861 0 0 0 0 1.722"}))});Dt.displayName="TaxInclusive";var Ln=Te,Hn=Ne,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zn=/^\w*$/;function Yn(e,n){if(Ln(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Hn(e)?!0:Zn.test(e)||!Un.test(e)||n!=null&&e in Object(n)}var Xn=Yn,Ot=_n,Qn="Expected a function";function Re(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Qn);var t=function(){var s=arguments,r=n?n.apply(this,s):s[0],l=t.cache;if(l.has(r))return l.get(r);var i=e.apply(this,s);return t.cache=l.set(r,i)||l,i};return t.cache=new(Re.Cache||Ot),t}Re.Cache=Ot;var Jn=Re,qn=Jn,es=500;function ts(e){var n=qn(e,function(s){return t.size===es&&t.clear(),s}),t=n.cache;return n}var ns=ts,ss=ns,rs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ls=/\\(\\)?/g,os=ss(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(rs,function(t,s,r,l){n.push(r?l.replace(ls,"$1"):s||t)}),n}),is=os;function as(e,n){for(var t=-1,s=e==null?0:e.length,r=Array(s);++t<s;)r[t]=n(e[t],t,e);return r}var cs=as,ot=nn,us=cs,ds=Te,fs=Ne,it=ot?ot.prototype:void 0,at=it?it.toString:void 0;function zt(e){if(typeof e=="string")return e;if(ds(e))return us(e,zt)+"";if(fs(e))return at?at.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var hs=zt,ms=hs;function ps(e){return e==null?"":ms(e)}var gs=ps,vs=Te,bs=Xn,ws=is,xs=gs;function Cs(e,n){return vs(e)?e:bs(e,n)?[e]:ws(xs(e))}var At=Cs,ys=Ne;function _s(e){if(typeof e=="string"||ys(e))return e;var n=e+"";return n=="0"&&1/e==-1/0?"-0":n}var Nt=_s,Ss=At,Es=Nt;function Ms(e,n){n=Ss(n,e);for(var t=0,s=n.length;e!=null&&t<s;)e=e[Es(n[t++])];return t&&t==s?e:void 0}var ks=Ms,Is=ks;function js(e,n,t){var s=e==null?void 0:Is(e,n);return s===void 0?t:s}var Ds=js;const Os=gt(Ds);var zs=Sn,As=function(){try{var e=zs(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ns=As,ct=Ns;function Ps(e,n,t){n=="__proto__"&&ct?ct(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}var Ts=Ps,Rs=Ts,Fs=En,$s=Object.prototype,Gs=$s.hasOwnProperty;function Vs(e,n,t){var s=e[n];(!(Gs.call(e,n)&&Fs(s,t))||t===void 0&&!(n in e))&&Rs(e,n,t)}var Ks=Vs,Ws=Ks,Bs=At,Ls=Mn,ut=sn,Hs=Nt;function Us(e,n,t,s){if(!ut(e))return e;n=Bs(n,e);for(var r=-1,l=n.length,i=l-1,o=e;o!=null&&++r<l;){var a=Hs(n[r]),f=t;if(a==="__proto__"||a==="constructor"||a==="prototype")return e;if(r!=i){var u=o[a];f=s?s(u,a,o):void 0,f===void 0&&(f=ut(u)?u:Ls(n[r+1])?[]:{})}Ws(o,a,f),o=o[a]}return e}var Zs=Us,Ys=Zs;function Xs(e,n,t){return e==null?e:Ys(e,n,t)}var Qs=Xs;const Pt=gt(Qs);var Js=function(e){var n=e.as,t=e.errors,s=e.name,r=e.message,l=e.render,i=function(m,x){if(m==null)return{};var v,h,b={},S=Object.keys(m);for(h=0;h<S.length;h++)x.indexOf(v=S[h])>=0||(b[v]=m[v]);return b}(e,["as","errors","name","message","render"]),o=rn(),a=he(t||o.formState.errors,s);if(!a)return null;var f=a.message,u=a.types,p=Object.assign({},i,{children:f||r});return c.isValidElement(n)?c.cloneElement(n,p):l?l({message:f||r,messages:u}):c.createElement(n||c.Fragment,p)};function re(e,n,t){let s=t.initialDeps??[],r;function l(){var i,o,a,f;let u;t.key&&((i=t.debug)!=null&&i.call(t))&&(u=Date.now());const p=e();if(!(p.length!==s.length||p.some((v,h)=>s[h]!==v)))return r;s=p;let x;if(t.key&&((o=t.debug)!=null&&o.call(t))&&(x=Date.now()),r=n(...p),t.key&&((a=t.debug)!=null&&a.call(t))){const v=Math.round((Date.now()-u)*100)/100,h=Math.round((Date.now()-x)*100)/100,b=h/16,S=(y,w)=>{for(y=String(y);y.length<w;)y=" "+y;return y};console.info(`%câ± ${S(h,5)} /${S(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(f=t==null?void 0:t.onChange)==null||f.call(t,r),r}return l.updateDeps=i=>{s=i},l}function Oe(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const qs=(e,n)=>Math.abs(e-n)<1,er=(e,n,t)=>{let s;return function(...r){e.clearTimeout(s),s=e.setTimeout(()=>n.apply(this,r),t)}},tr=e=>e,nr=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let r=n;r<=t;r++)s.push(r);return s},sr=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;const r=i=>{const{width:o,height:a}=i;n({width:Math.round(o),height:Math.round(a)})};if(r(t.getBoundingClientRect()),!s.ResizeObserver)return()=>{};const l=new s.ResizeObserver(i=>{const o=()=>{const a=i[0];if(a!=null&&a.borderBoxSize){const f=a.borderBoxSize[0];if(f){r({width:f.inlineSize,height:f.blockSize});return}}r(t.getBoundingClientRect())};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},dt={passive:!0},ft=typeof window>"u"?!0:"onscrollend"in window,rr=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=e.targetWindow;if(!s)return;let r=0;const l=e.options.useScrollendEvent&&ft?()=>{}:er(s,()=>{n(r,!1)},e.options.isScrollingResetDelay),i=u=>()=>{const{horizontal:p,isRtl:m}=e.options;r=p?t.scrollLeft*(m&&-1||1):t.scrollTop,l(),n(r,u)},o=i(!0),a=i(!1);a(),t.addEventListener("scroll",o,dt);const f=e.options.useScrollendEvent&&ft;return f&&t.addEventListener("scrollend",a,dt),()=>{t.removeEventListener("scroll",o),f&&t.removeEventListener("scrollend",a)}},lr=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const s=n.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},or=(e,{adjustments:n=0,behavior:t},s)=>{var r,l;const i=e+n;(l=(r=s.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[s.options.horizontal?"left":"top"]:i,behavior:t})};class ir{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{const i=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var r;(r=s())==null||r.disconnect(),t=null},observe:r=>{var l;return(l=s())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=s())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,r])=>{typeof r>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:tr,rangeExtractor:nr,onChange:()=>{},measureElement:lr,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,r;(r=(s=this.options).onChange)==null||r.call(s,this,t)},this.maybeNotify=re(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const r=new Map,l=new Map;for(let i=s-1;i>=0;i--){const o=t[i];if(r.has(o.lane))continue;const a=l.get(o.lane);if(a==null||o.end>a.end?l.set(o.lane,o):o.end<a.end&&r.set(o.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=re(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,s,r,l,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:i}),{key:!1}),this.getMeasurements=re(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:r,getItemKey:l,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,a);for(let u=a;u<t;u++){const p=l(u),m=this.options.lanes===1?f[u-1]:this.getFurthestMeasurement(f,u),x=m?m.end+this.options.gap:s+r,v=o.get(p),h=typeof v=="number"?v:this.options.estimateSize(u),b=x+h,S=m?m.lane:u%this.options.lanes;f[u]={index:u,start:x,size:h,end:b,key:p,lane:S}}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=re(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,r,l)=>this.range=t.length>0&&s>0?ar({measurements:t,outerSize:s,scrollOffset:r,lanes:l}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=re(()=>{let t=null,s=null;const r=this.calculateRange();return r&&(t=r.startIndex,s=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,r,l,i)=>l===null||i===null?[]:t({startIndex:l,endIndex:i,overscan:s,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,r=t.getAttribute(s);return r?parseInt(r,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const r=this.indexFromElement(t),l=this.measurementsCache[r];if(!l)return;const i=l.key,o=this.elementsCache.get(i);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const r=this.measurementsCache[t];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,i=s-l;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,r)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=re(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const r=[];for(let l=0,i=t.length;l<i;l++){const o=t[l],a=s[o];r.push(a)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return Oe(s[Tt(0,s.length-1,r=>Oe(s[r]).start,t)])},this.getOffsetForAlignment=(t,s,r=0)=>{const l=this.getSize(),i=this.getScrollOffset();s==="auto"&&(s=t>=i+l?"end":"start"),s==="center"?t+=(r-l)/2:s==="end"&&(t-=l);const o=this.options.horizontal?"scrollWidth":"scrollHeight",f=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-l;return Math.max(Math.min(f,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const l=this.getSize(),i=this.getScrollOffset();if(s==="auto")if(r.end>=i+l-this.options.scrollPaddingEnd)s="end";else if(r.start<=i+this.options.scrollPaddingStart)s="start";else return[i,s];const o=s==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,s,r.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:s="auto",behavior:r}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const l=this.getOffsetForIndex(t,s);if(!l)return;const[i,o]=l;this._scrollToOffset(i,{adjustments:void 0,behavior:r}),r!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[f]=Oe(this.getOffsetForIndex(t,o));qs(f,this.getScrollOffset())||this.scrollToIndex(t,{align:o,behavior:r})}else this.scrollToIndex(t,{align:o,behavior:r})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let r;if(s.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((t=s[s.length-1])==null?void 0:t.end)??0;else{const l=Array(this.options.lanes).fill(null);let i=s.length-1;for(;i>0&&l.some(o=>o===null);){const o=s[i];l[o.lane]===null&&(l[o.lane]=o.end),i--}r=Math.max(...l.filter(o=>o!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const Tt=(e,n,t,s)=>{for(;e<=n;){const r=(e+n)/2|0,l=t(r);if(l<s)e=r+1;else if(l>s)n=r-1;else return r}return e>0?e-1:0};function ar({measurements:e,outerSize:n,scrollOffset:t,lanes:s}){const r=e.length-1;let i=Tt(0,r,a=>e[a].start,t),o=i;if(s===1)for(;o<r&&e[o].end<t+n;)o++;else if(s>1){const a=Array(s).fill(0);for(;o<r&&a.some(u=>u<t+n);){const u=e[o];a[u.lane]=u.end,o++}const f=Array(s).fill(t+n);for(;i>0&&f.some(u=>u>=t);){const u=e[i];f[u.lane]=u.start,i--}i=Math.max(0,i-i%s),o=Math.min(r,o+(s-1-o%s))}return{startIndex:i,endIndex:o}}const ht=typeof document<"u"?c.useLayoutEffect:c.useEffect;function cr(e){const n=c.useReducer(()=>({}),{})[1],t={...e,onChange:(r,l)=>{var i;l?ln.flushSync(n):n(),(i=e.onChange)==null||i.call(e,r,l)}},[s]=c.useState(()=>new ir(t));return s.setOptions(t),ht(()=>s._didMount(),[]),ht(()=>s._willUpdate()),s}function mt(e){return cr({observeElementRect:sr,observeElementOffset:rr,scrollToFn:or,...e})}var ur=({columns:e,rows:n=10})=>{const t=Array.from({length:n},(r,l)=>l),s=e.length;return d.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[d.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:d.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),d.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((r,l)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(et,{className:"h-[14px] w-[164px]"})},l))}),d.jsx("div",{children:t.map((r,l)=>d.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:e.map((i,o)=>d.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:d.jsx(et,{className:"h-[14px] w-[164px]"})},o))},l))})]})]})};function dr(e,n){typeof e=="function"?e(n):e&&"current"in e&&(e.current=n)}var we=(...e)=>n=>{e.forEach(t=>dr(t,n))},Rt=c.createContext(null),Fe=()=>{const e=c.useContext(Rt);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function Ft(e){return`${e.row}:${e.col}`}function $t(e,n){return n?e.row===n.row&&e.col===n.col:!1}var fr=[".",","];function Gt(e){return fr.includes(e.key)&&e.ctrlKey&&e.altKey}var hr=/^.$/u,mr=/^[0-9]$/u,xe=({context:e})=>{const{register:n,control:t,anchor:s,setIsEditing:r,setSingleRange:l,setIsSelecting:i,setRangeEnd:o,getWrapperFocusHandler:a,getWrapperMouseOverHandler:f,getInputChangeHandler:u,getIsCellSelected:p,getIsCellDragSelected:m,getCellMetadata:x}=Fe(),{rowIndex:v,columnIndex:h}=e,b=c.useMemo(()=>({row:v,col:h}),[v,h]),{id:S,field:y,type:w,innerAttributes:D,inputAttributes:_}=c.useMemo(()=>x(b),[b,x]),[O,$]=c.useState(!0),F=c.useRef(null),T=c.useRef(null),U=c.useCallback(E=>{if(E.preventDefault(),E.stopPropagation(),E.detail===2&&T.current){$(!1),T.current.focus();return}if(E.shiftKey&&b.col===(s==null?void 0:s.col)){o(b);return}F.current&&(l(b),i(!0),F.current.focus())},[b,s,o,l,i]),Z=c.useCallback(E=>{var R;if(E.preventDefault(),E.stopPropagation(),E.detail===2){(R=T.current)==null||R.focus();return}if(E.shiftKey){o(b);return}F.current&&(l(b),i(!0),F.current.focus())},[i,l,o,b]),ee=c.useCallback(()=>{$(!0),r(!1)},[r]),te=c.useCallback(()=>{$(!1),r(!0)},[r]),ne=c.useCallback(E=>{switch(w){case"togglable-number":case"number":return mr.test(E);case"text":return hr.test(E);default:return!1}},[w]),Y=c.useCallback(E=>{var R;if(!(!T.current||!ne(E.key)||!O)&&!(E.key.toLowerCase()==="z"&&(E.ctrlKey||E.metaKey))&&!(E.key.toLowerCase()==="c"&&(E.ctrlKey||E.metaKey))&&!(E.key.toLowerCase()==="v"&&(E.ctrlKey||E.metaKey))&&E.key!=="Enter"&&!Gt(E.nativeEvent)){if(T.current.focus(),$(!1),T.current instanceof HTMLInputElement){T.current.value="";const X=(R=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:R.set;X==null||X.call(T.current,E.key);const Q=new Event("input",{bubbles:!0});T.current.dispatchEvent(Q)}E.stopPropagation(),E.preventDefault()}},[O,ne]),L=c.useMemo(()=>s?$t(b,s):!1,[s,b]),B=c.useMemo(()=>w==="boolean",[w]);c.useEffect(()=>{var E,R;L&&!((E=F.current)!=null&&E.contains(document.activeElement))&&((R=F.current)==null||R.focus())},[L]);const se={container:{field:y,isAnchor:L,isSelected:p(b),isDragSelected:m(b),showOverlay:B?!1:O,innerProps:{ref:F,onMouseOver:f(b),onMouseDown:w==="boolean"?Z:void 0,onKeyDown:Y,onFocus:a(b),...D},overlayProps:{onMouseDown:U}},input:{ref:T,onBlur:ee,onFocus:te,onChange:u(y),..._}};return{id:S,field:y,register:n,control:t,renderProps:se}},ie=({context:e})=>{const{errors:n,getCellErrorMetadata:t,navigateToField:s}=Fe(),{rowIndex:r,columnIndex:l}=e,{accessor:i,field:o}=c.useMemo(()=>t({row:r,col:l}),[r,l,t]),a=i&&l===0?he(n,i):void 0,f=[];function u(m,x){if(m)if(pr(m)){const v=m.message,h=()=>s(x);v&&f.push({message:v,to:h})}else Object.keys(m).forEach(v=>{const h=m[v],b=`${x}.${v}`;h&&typeof h=="object"&&u(h,b)})}a&&i&&u(a,i);const p=o?he(n,o):void 0;return{errors:n,rowErrors:f,cellError:p}};function pr(e){return typeof e=="object"&&"message"in e&&"type"in e}var le=class{constructor({fields:e,prev:n,next:t,setter:s}){W(this,"_fields"),W(this,"_prev"),W(this,"_next"),W(this,"_setter"),this._fields=e,this._prev=n,this._next=t,this._setter=s}execute(e=!1){this._setter(this._fields,this._next,e)}undo(){this._setter(this._fields,this._prev,!0)}redo(){this.execute(!0)}},gr=class{constructor(e,n,t=!1){W(this,"multiColumnSelection"),W(this,"cells"),W(this,"rowAccessors",[]),W(this,"columnAccessors",[]),this.multiColumnSelection=t,this.cells=this._populateCells(e,n),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,n)=>this.getRowAccessor(n))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,n)=>this.getColumnAccessor(n))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let n=0;n<this.cells[0].length;n++)if(this.cells[e][n]!==null)return{row:e,col:n};return null}getFieldsInRow(e){const n=[];return e<0||e>=this.cells.length||this.cells[e].forEach(t=>{t!==null&&n.push(t.field)}),n}getFieldsInSelection(e,n){var o;const t=[];if(!e||!n)return t;if(!this.multiColumnSelection&&e.col!==n.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const s=Math.min(e.row,n.row),r=Math.max(e.row,n.row),l=this.multiColumnSelection?Math.min(e.col,n.col):e.col,i=this.multiColumnSelection?Math.max(e.col,n.col):e.col;for(let a=s;a<=r;a++)for(let f=l;f<=i;f++)this._isValidPosition(a,f)&&this.cells[a][f]!==null&&t.push((o=this.cells[a][f])==null?void 0:o.field);return t}getCellField(e){var n;return this._isValidPosition(e.row,e.col)&&((n=this.cells[e.row][e.col])==null?void 0:n.field)||null}getCellType(e){var n;return this._isValidPosition(e.row,e.col)&&((n=this.cells[e.row][e.col])==null?void 0:n.type)||null}getIsCellSelected(e,n,t){if(!e||!n||!t)return!1;if(!this.multiColumnSelection&&n.col!==t.col)throw new Error("Selection must be in the same column when multiColumnSelection is disabled");const s=Math.min(n.row,t.row),r=Math.max(n.row,t.row),l=this.multiColumnSelection?Math.min(n.col,t.col):n.col,i=this.multiColumnSelection?Math.max(n.col,t.col):n.col;return e.row>=s&&e.row<=r&&e.col>=l&&e.col<=i}toggleColumn(e,n){e<0||e>=this.cells[0].length||this.cells.forEach((t,s)=>{const r=t[e];r&&(this.cells[s][e]={...r,enabled:n})})}toggleRow(e,n){e<0||e>=this.cells.length||this.cells[e].forEach((t,s)=>{t&&(this.cells[e][s]={...t,enabled:n})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const n=this.columnAccessors.indexOf(e);return n===-1?null:{row:0,col:n}}for(let n=0;n<this.rowAccessors.length;n++){const t=this.rowAccessors[n];if(t!==null&&e.startsWith(t))for(let s=0;s<this.columnAccessors.length;s++){const r=this.columnAccessors[s];if(r===null)continue;if(`${t}.${r}`===e)return{row:n,col:s}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const t=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(t.length===0)return null;let s=t[0];for(const l of t)if(s=s.filter((i,o)=>l[o]===i),s.length===0)break;const r=s.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const n=this.cells.map((r,l)=>{const i=r[e];if(!i)return null;const o=this.getRowAccessor(l);return o&&i.field.startsWith(o+".")?i.field.slice(o.length+1):null}).filter(r=>r!==null);if(n.length===0)return null;const t=n[0];return n.every(r=>r===t)?t:null}getValidMovement(e,n,t,s=!1){var i;const[r,l]=this._getDirectionDeltas(t);if(s)return this._getLastValidCellInDirection(e,n,r,l);{let o=e+r,a=n+l;for(;this._isValidPosition(o,a);){if(this.cells[o][a]!==null&&((i=this.cells[o][a])==null?void 0:i.enabled)!==!1)return{row:o,col:a};o+=r,a+=l}return{row:e,col:n}}}_isValidPosition(e,n,t){return t||(t=this.cells),e>=0&&e<t.length&&n>=0&&n<t[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,n,t,s){let r=e,l=n,i=e,o=n;for(;this._isValidPosition(r+t,l+s);)r+=t,l+=s,this.cells[r][l]!==null&&(i=r,o=l);return{row:i,col:o}}_populateCells(e,n){const t=Array.from({length:e.length},()=>Array(n.length).fill(null));return e.forEach((s,r)=>{n.forEach((l,i)=>{if(!this._isValidPosition(r,i,t))return;const{name:o,field:a,type:f,...u}=l.meta,p={row:s,column:{...l,meta:u}},m=a?a(p):null;!m||!f||(t[r][i]={field:m,type:f,enabled:!0})})}),t}},vr=class{constructor(e){W(this,"container"),this.container=e}getInput(e){var s;const n=this._getCellId(e),t=(s=this.container)==null?void 0:s.querySelector(`[data-cell-id="${n}"]`);return t||null}getInputByField(e){var t;const n=(t=this.container)==null?void 0:t.querySelector(`[data-field="${e}"]`);return n||null}getCoordinatesByField(e){var l;const n=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!n)return null;const t=n.getAttribute("data-cell-id");if(!t)return null;const[s,r]=t.split(":").map(i=>parseInt(i,10));return isNaN(s)||isNaN(r)?null:{row:s,col:r}}getContainer(e){var s;const n=this._getCellId(e),t=(s=this.container)==null?void 0:s.querySelector(`[data-container-id="${n}"]`);return t||null}_getCellId(e){return Ft(e)}},fe=class{constructor({prev:e,next:n,setter:t}){W(this,"_prev"),W(this,"_next"),W(this,"_setter"),this._prev=e,this._next=n,this._setter=t}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},br=({matrix:e,anchor:n,rangeEnd:t,setRangeEnd:s,isDragging:r,setIsDragging:l,isSelecting:i,setIsSelecting:o,setSingleRange:a,dragEnd:f,setDragEnd:u,setValue:p,execute:m,multiColumnSelection:x})=>{const v=c.useCallback(_=>O=>{a(_)},[a]),h=c.useCallback(_=>O=>{if(O.stopPropagation(),O.preventDefault(),O.shiftKey){s(_);return}o(!0),a(_)},[o,s,a]),b=c.useCallback(_=>{if(!(!r&&!i))return O=>{(n==null?void 0:n.col)!==_.col&&!x||(i?s(_):u(_))}},[n==null?void 0:n.col,r,i,u,s,x]),S=c.useCallback(_=>(O,$)=>{const F=new fe({next:O,prev:$,setter:T=>{p(_,T,{shouldDirty:!0,shouldTouch:!0})}});m(F)},[p,m]),y=c.useCallback(_=>{l(!0)},[l]),w=c.useCallback(_=>!_||!n||!t?!1:e.getIsCellSelected(_,n,t),[n,t,e]),D=c.useCallback(_=>!_||!n||!f?!1:e.getIsCellSelected(_,n,f),[n,f,e]);return{getWrapperFocusHandler:v,getOverlayMouseDownHandler:h,getWrapperMouseOverHandler:b,getInputChangeHandler:S,getIsCellSelected:w,getIsCellDragSelected:D,onDragToFillStart:y}},wr=({matrix:e})=>{const n=c.useCallback(s=>{const{row:r,col:l}=s,i=Ft(s),o=e.getCellField(s),a=e.getCellType(s);if(!o||!a)throw new Error(`'field' or 'type' is null for cell ${i}`);return{id:i,field:o,type:a,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":i,"data-field":o},innerAttributes:{"data-container-id":i}}},[e]),t=c.useCallback(s=>{const r=e.getRowAccessor(s.row),l=e.getCellField(s);return{accessor:r,field:l}},[e]);return{getCellMetadata:n,getCellErrorMetadata:t}},xr=({matrix:e,form:n})=>{const[t,s]=c.useState(null),{getValues:r,setValue:l}=n,i=c.useCallback(a=>{if(!a)return null;const f=e.getCellField(a);if(!f)return null;const u=r(f);s(p=>(p==null?void 0:p.field)===f?p:{field:f,value:u})},[r,e]),o=c.useCallback(()=>{if(!t)return;const{field:a,value:f}=t;requestAnimationFrame(()=>{l(a,f)})},[l,t]);return{createSnapshot:i,restoreSnapshot:o}},Cr=({matrix:e,anchor:n,rangeEnd:t,isEditing:s,getSelectionValues:r,setSelectionValues:l,execute:i})=>{const o=c.useCallback(f=>{var x;if(s||!n||!t)return;f.preventDefault();const u=e.getFieldsInSelection(n,t),m=r(u).map(v=>typeof v=="object"&&v!==null?JSON.stringify(v):`${v}`??"").join("	");(x=f.clipboardData)==null||x.setData("text/plain",m)},[s,n,t,e,r]),a=c.useCallback(f=>{var h;if(s||!n||!t)return;f.preventDefault();const u=(h=f.clipboardData)==null?void 0:h.getData("text/plain");if(!u)return;const p=u.split("	"),m=e.getFieldsInSelection(n,t),x=r(m),v=new le({fields:m,next:p,prev:x,setter:l});i(v)},[s,n,t,e,r,l,i]);return{handleCopyEvent:o,handlePasteEvent:a}};function yr(e,n){const t=e.getAllLeafColumns(),s=t.map(a=>({id:a.id,name:_r(a),checked:a.getIsVisible(),disabled:!a.getCanHide()})),r=c.useCallback(a=>f=>{const u=t[a];u.getCanHide()&&(n.toggleColumn(a,f),u.toggleVisibility(f))},[t,n]),l=c.useCallback(()=>{e.setColumnVisibility({})},[e]),o=s.filter(a=>!a.disabled).length===0;return{columnOptions:s,handleToggleColumn:r,handleResetColumns:l,isDisabled:o}}function _r(e){const n=e.columnDef.id;e.columnDef.enableHiding;const t=e==null?void 0:e.columnDef.meta;if(!n)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return(t==null?void 0:t.name)||n}var dl=({duplicateOf:e})=>{const{control:n}=Fe();return{watchedValue:an({control:n,name:e})}},Sr=(e,n,t)=>{const[s,r]=c.useState(!1),[l,i]=c.useState(null),{flatRows:o}=n.getRowModel(),a=n.getAllFlatColumns(),f=Vt(t),u=f.length,{rowsWithErrors:p,columnsWithErrors:m}=c.useMemo(()=>{const v=new Set,h=new Set;return f.forEach(b=>{const S=e.rowAccessors.findIndex(w=>w&&(b===w||b.startsWith(`${w}.`)));S!==-1&&v.add(S);const y=e.columnAccessors.findIndex(w=>w&&(b===w||b.endsWith(`.${w}`)));y!==-1&&h.add(y)}),{rowsWithErrors:v,columnsWithErrors:h}},[f,e.rowAccessors,e.columnAccessors]),x=c.useCallback((v,h,b,S)=>{if(s)l&&(b(l.rows),S(l.columns));else{i({rows:{...v},columns:{...h}});const y=o.map((D,_)=>p.has(_)?void 0:_).filter(D=>D!==void 0),w=a.map((D,_)=>!m.has(_)&&_!==0?D.id:void 0).filter(D=>D!==void 0);b(y.reduce((D,_)=>({...D,[_]:!1}),{})),S(w.reduce((D,_)=>({...D,[_]:!1}),{}))}r(y=>!y)},[s,l,o,a,p,m]);return{errorCount:u,isHighlighted:s,toggleErrorHighlighting:x}};function Vt(e,n=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[n.join(".")]:Object.entries(e).flatMap(([t,s])=>Vt(s,[...n,t]))}var Er=({matrix:e,form:n,anchor:t})=>{const{getValues:s,reset:r}=n,l=c.useCallback(o=>{if(!o.length)return[];const a=s();return o.map(f=>f.split(".").reduce((u,p)=>u==null?void 0:u[p],a))},[s]),i=c.useCallback(async(o,a,f)=>{if(!o.length||!t)return;const u=e.getCellType(t);if(!u)return;const p=zr(a,u),m=s();o.forEach((x,v)=>{if(!x)return;const h=v%a.length,b=p[h];Dr(m,x,b,u,f)}),r(m,{keepDirty:!0,keepTouched:!0,keepDefaultValues:!0})},[e,t,s,r]);return{getSelectionValues:l,setSelectionValues:i}};function Mr(e){if(typeof e=="number")return e;const n=Number(e);if(isNaN(n))throw new Error(`String "${e}" cannot be converted to number.`);return n}function kr(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const n=e.toLowerCase();if(n==="true"||n==="false")return n==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function Ir(e){return typeof e>"u"||e===null?"":String(e)}function jr(e){let n=e;if(typeof n=="string")try{n=JSON.parse(n)}catch{throw new Error(`String "${e}" cannot be converted to object.`)}return n}function Dr(e,n,t,s,r){if(s!=="togglable-number"){Pt(e,n,t);return}Or(e,n,t,r)}function Or(e,n,t,s){const r=Os(e,n),{disabledToggle:l}=r,i=u=>l&&u===""?0:u,o=u=>l?!0:u!==""&&u!=null,a=i(t.quantity),f=s?l?!0:t.checked:o(a);Pt(e,n,{...r,quantity:a,checked:f})}function zr(e,n){switch(n){case"number":return e.map(t=>t===""?t:t==null?"":Mr(t));case"togglable-number":return e.map(jr);case"boolean":return e.map(kr);case"text":return e.map(Ir);default:throw new Error(`Unsupported target type "${n}".`)}}var Ar=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Nr=["ArrowUp","ArrowDown"],Pr=({containerRef:e,matrix:n,anchor:t,rangeEnd:s,isEditing:r,setTrapActive:l,scrollToCoordinates:i,setSingleRange:o,setRangeEnd:a,onEditingChangeHandler:f,getValues:u,setValue:p,execute:m,undo:x,redo:v,queryTool:h,getSelectionValues:b,setSelectionValues:S,restoreSnapshot:y,createSnapshot:w})=>{const D=c.useCallback(g=>{if(!t)return;const C=n.getCellType(t);if(r&&C!=="boolean")return;const I=Nr.includes(g.key)?"vertical":"horizontal",M=I==="horizontal"?t:g.shiftKey?s:t,j=I==="horizontal"?o:g.shiftKey?a:o;if(!M)return;const{row:z,col:P}=M,A=G=>{g.preventDefault(),g.stopPropagation(),i(G,I),j(G)},J=n.getValidMovement(z,P,g.key,g.metaKey||g.ctrlKey);A(J)},[r,t,s,i,o,a,n]),_=c.useCallback(g=>{if(!t)return;g.preventDefault(),g.stopPropagation();const{row:C,col:I}=t,M=g.shiftKey?"ArrowLeft":"ArrowRight",j="horizontal",z=n.getValidMovement(C,I,M,g.metaKey||g.ctrlKey);i(z,j),o(z)},[t,i,o,n]),O=c.useCallback(g=>{if(g.preventDefault(),g.shiftKey){v();return}x()},[v,x]),$=c.useCallback(g=>{const C=s??g,I=n.getFieldsInSelection(g,C),M=b(I),j=M.every(A=>A===!0),z=Array.from({length:M.length},()=>!j),P=new le({fields:I,next:z,prev:M,setter:S});m(P)},[s,n,b,S,m]),F=c.useCallback(g=>{const C=n.getCellField(g),I=h==null?void 0:h.getInput(g);if(!C||!I)return;w(g);const M=u(C),j="",z=new fe({next:j,prev:M,setter:P=>{p(C,P,{shouldDirty:!0,shouldTouch:!0})}});m(z),I.focus()},[n,h,u,m,p,w]),T=c.useCallback(g=>{const C=n.getCellField(g),I=h==null?void 0:h.getInput(g);if(!C||!I)return;w(g);const M=u(C);let j=M.checked;M.disabledToggle||(j=!1);const z={...M,quantity:"",checked:j},P=new fe({next:z,prev:M,setter:A=>{p(C,A,{shouldDirty:!0,shouldTouch:!0})}});m(P),I.focus()},[n,h,u,m,p,w]),U=c.useCallback(g=>{if(!t||r)return;g.preventDefault();const C=n.getCellType(t);if(C)switch(C){case"boolean":$(t);break;case"togglable-number":T(t);break;case"number":case"text":F(t);break}},[t,r,n,$,F,T]),Z=c.useCallback((g,C)=>{const I=g.shiftKey?"ArrowUp":"ArrowDown",M=n.getValidMovement(C.row,C.col,I,!1);if(C.row!==M.row||C.col!==M.col)o(M),i(M,"vertical");else{const j=h==null?void 0:h.getContainer(C);j==null||j.focus()}f(!1)},[h,n,i,o,f]),ee=c.useCallback(g=>{const C=h==null?void 0:h.getInput(g);C&&(C.focus(),f(!0))},[h,f]),te=c.useCallback((g,C)=>{if(r){Z(g,C);return}ee(C)},[Z,ee,r]),ne=c.useCallback((g,C)=>{const I=n.getCellField(C);if(!I)return;const M=u(I);let j;typeof M=="boolean"?j=!M:j=!0;const z=new fe({next:j,prev:M,setter:P=>{p(I,P,{shouldDirty:!0,shouldTouch:!0})}});m(z),Z(g,C)},[m,u,Z,n,p]),Y=c.useCallback(g=>{if(!t)return;switch(g.preventDefault(),n.getCellType(t)){case"togglable-number":case"text":case"number":te(g,t);break;case"boolean":{ne(g,t);break}}},[t,n,te,ne]),L=c.useCallback((g,C)=>{const I=n.getFieldsInSelection(g,C),M=b(I),j=M.map(P=>({...P,quantity:"",checked:P.disableToggle?P.checked:!1})),z=new le({fields:I,next:j,prev:M,setter:S});m(z)},[n,b,S,m]),B=c.useCallback((g,C)=>{const I=n.getFieldsInSelection(g,C),M=b(I),j=Array.from({length:M.length},()=>""),z=new le({fields:I,next:j,prev:M,setter:S});m(z)},[n,b,S,m]),se=c.useCallback((g,C)=>{const I=n.getFieldsInSelection(g,C),M=b(I),j=Array.from({length:M.length},()=>!1),z=new le({fields:I,next:j,prev:M,setter:S});m(z)},[m,b,n,S]),E=c.useCallback(g=>{if(!t||!s||r)return;g.preventDefault();const C=n.getCellType(t);if(C)switch(C){case"text":case"number":B(t,s);break;case"boolean":se(t,s);break;case"togglable-number":L(t,s);break}},[t,s,r,n,B,se,L]),R=c.useCallback(g=>{if(!t||!r)return;g.preventDefault(),g.stopPropagation(),y();const C=h==null?void 0:h.getContainer(t);C==null||C.focus()},[h,r,t,y]),X=c.useCallback(g=>{if(!e||r)return;const C=Tr(e),I=M=>{M&&(l(!1),M.focus())};switch(g.key){case".":I(C.cancel);break;case",":I(C.shortcuts);break}},[r,l,e]);return{handleKeyDownEvent:c.useCallback(g=>{if(Ar.includes(g.key)){D(g);return}if(g.key==="z"&&(g.metaKey||g.ctrlKey)){O(g);return}if(g.key===" "){U(g);return}if(g.key==="Delete"||g.key==="Backspace"){E(g);return}if(g.key==="Enter"){Y(g);return}if(g.key==="Escape"){R(g);return}if(g.key==="Tab"){_(g);return}},[R,D,O,U,Y,E,_]),handleSpecialFocusKeys:X}};function Tr(e){const n=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),t=n.indexOf(e.current),s=t>0?n[t-1]:null;let r=null;for(let l=t+1;l<n.length;l++)if(!e.current.contains(n[l])){r=n[l];break}return{shortcuts:s,cancel:r}}var Rr=({matrix:e,anchor:n,dragEnd:t,setDragEnd:s,isDragging:r,setIsDragging:l,setRangeEnd:i,setIsSelecting:o,getSelectionValues:a,setSelectionValues:f,execute:u})=>{const p=c.useCallback(()=>{if(!r||!n||!t)return;const x=e.getFieldsInSelection(n,t),v=e.getCellField(n);if(!v||!x.length)return;const h=a([v]),b=x.filter(D=>D!==v),S=a(b),y=Array.from({length:S.length},()=>h[0]),w=new le({fields:b,prev:S,next:y,setter:f});u(w),l(!1),s(null),i(t)},[r,n,t,e,a,f,u,l,s,i]);return{handleMouseUpEvent:c.useCallback(()=>{p(),o(!1)},[p,o])}},Fr=({matrix:e,anchor:n,visibleColumns:t,visibleRows:s,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:i,flatColumns:o,queryTool:a,setSingleRange:f})=>{const u=c.useCallback((m,x)=>{if(!n)return;const{row:v,col:h}=m,{row:b,col:S}=n,y=v>=b?"down":"up",w=h>=S?"right":"left";let D=y==="down"?v+1:v-1;s[D]===void 0&&(D=v);let _=w==="right"?h+1:h-1;t[_]===void 0&&(_=h);const O={align:"auto",behavior:"auto"};(x==="horizontal"||x==="both")&&r.scrollToIndex(_,O),(x==="vertical"||x==="both")&&l.scrollToIndex(D,O)},[n,r,s,l,t]),p=c.useCallback(m=>{const x=e.getCoordinatesByField(m);if(!x)return;const v=o[x.col];i(h=>({...h,[v.id]:!0})),requestAnimationFrame(()=>{u(x,"both"),f(x)}),requestAnimationFrame(()=>{const h=a==null?void 0:a.getInput(x);h&&h.focus()})},[e,o,i,u,f,a]);return{scrollToCoordinates:u,navigateToField:p}},$r=e=>{const n=c.useRef(null);return c.useEffect(()=>{e.current&&(n.current=new vr(e.current))},[e]),n.current},Kt=({rowErrors:e})=>{const n=e?e.length:0;return!e||n<=0?null:d.jsx(Pe,{content:d.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((t,s)=>d.jsx(Gr,{error:t},s))}),delayDuration:0,children:d.jsx(on,{color:"red",size:"2xsmall",className:"cursor-default",children:n})})},Gr=({error:e})=>{const{t:n}=oe();return d.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,d.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:n("dataGrid.errors.fixError")})]})},Ce=({isAnchor:e,isSelected:n,isDragSelected:t,field:s,showOverlay:r,placeholder:l,innerProps:i,overlayProps:o,children:a,errors:f,rowErrors:u,outerComponent:p})=>{const x=!!he(f,s);return d.jsxs("div",{className:"group/container relative size-full",children:[d.jsxs("div",{className:q("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":x&&!e&&!n&&!t,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":n||e,"bg-ui-bg-subtle":t&&!e}),tabIndex:-1,...i,children:[d.jsx(Js,{name:s,errors:f,render:({message:v})=>d.jsx("div",{className:"flex items-center justify-center",children:d.jsx(Pe,{content:v,delayDuration:0,children:d.jsx(vt,{className:"text-ui-tag-red-icon z-[3]"})})})}),d.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:d.jsx(Vr,{isAnchor:e,placeholder:l,children:a})}),d.jsx(Kt,{rowErrors:u}),r&&d.jsx("div",{...o,"data-cell-overlay":"true",className:"absolute inset-0 z-[2]"})]}),p]})},Vr=({isAnchor:e,placeholder:n,children:t})=>!e&&n?n:t,Kr=({context:e,disabled:n})=>{const{field:t,control:s,renderProps:r}=xe({context:e}),l=ie({context:e}),{container:i,input:o}=r;return d.jsx(be,{control:s,name:t,render:({field:a})=>d.jsx(Ce,{...i,...l,children:d.jsx(Wr,{field:a,inputProps:o,disabled:n})})})},Wr=({field:e,inputProps:n,disabled:t})=>{const{ref:s,value:r,onBlur:l,name:i,disabled:o}=e,{ref:a,onBlur:f,onChange:u,onFocus:p,...m}=n,x=we(s,a);return d.jsx(zn,{disabled:t||o,name:i,checked:r,onCheckedChange:v=>u(v===!0,r),onFocus:p,onBlur:()=>{l(),f()},ref:x,tabIndex:-1,...m})},ze=({context:e,code:n})=>{const{field:t,control:s,renderProps:r}=xe({context:e}),l=ie({context:e}),{container:i,input:o}=r,a=tn[n.toUpperCase()];return d.jsx(be,{control:s,name:t,render:({field:f})=>d.jsx(Ce,{...i,...l,children:d.jsx(Br,{field:f,inputProps:o,currencyInfo:a})})})},Br=({field:e,inputProps:n,currencyInfo:t})=>{const{value:s,onChange:r,onBlur:l,ref:i,...o}=e,{ref:a,onBlur:f,onFocus:u,onChange:p,...m}=n,x=c.useCallback(y=>{const w=typeof y=="number"?y.toString():y||"";return kn({value:w,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[v,h]=c.useState(s||""),b=(y,w,D)=>{if(!y){h("");return}h(y)};c.useEffect(()=>{let y=s;isNaN(Number(s))||(y=x(y)),h(y)},[s,x]);const S=we(a,i);return d.jsxs("div",{className:"relative flex size-full items-center",children:[d.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),d.jsx(In,{...o,...m,ref:S,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:v||void 0,onValueChange:b,formatValueOnBlur:!0,onBlur:()=>{l(),f(),p(v,s)},onFocus:u,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Lr=({context:e,...n})=>{const{field:t,control:s,renderProps:r}=xe({context:e}),l=ie({context:e}),{container:i,input:o}=r;return d.jsx(be,{control:s,name:t,render:({field:a})=>d.jsx(Ce,{...i,...l,children:d.jsx(Hr,{field:a,inputProps:o,...n})})})},Hr=({field:e,inputProps:n,...t})=>{const{ref:s,value:r,onChange:l,onBlur:i,...o}=e,{ref:a,onChange:f,onBlur:u,onFocus:p,...m}=n,[x,v]=c.useState(r);c.useEffect(()=>{v(r)},[r]);const h=we(a,s);return d.jsx("div",{className:"size-full",children:d.jsx("input",{ref:h,value:x,onChange:b=>v(b.target.value),onBlur:()=>{i(),u(),f(x,r)},onFocus:p,type:"number",inputMode:"decimal",className:q("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...t,...o,...m})})},Ae=({context:e,color:n="muted",children:t})=>{const{rowErrors:s}=ie({context:e});return d.jsxs("div",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",n==="muted"&&"bg-ui-bg-subtle",n==="normal"&&"bg-ui-bg-base"),children:[d.jsx("div",{className:"flex-1 truncate",children:t}),d.jsx(Kt,{rowErrors:s})]})},Ur=(e=20)=>{const[n,t]=c.useState([]),[s,r]=c.useState([]),l=n.length>0,i=s.length>0,o=c.useCallback(()=>{if(!l)return;const u=n[n.length-1],p=n.slice(0,n.length-1);u.undo(),t(p),r([u,...s.slice(0,e-1)])},[l,s,n,e]),a=c.useCallback(()=>{if(!i)return;const u=s[0],p=s.slice(1);u.redo(),t([...n,u].slice(0,e-1)),r(p)},[i,s,n,e]),f=c.useCallback(u=>{u.execute(),t(p=>[...p,u].slice(0,e-1)),r([])},[e]);return{undo:o,redo:a,execute:f,canUndo:l,canRedo:i}},Zr=()=>{const{t:e}=oe();return c.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["âŒ˜","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["â‡§","âŒ˜","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["âŒ˜","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["âŒ˜","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["â†µ"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["âŒ«"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["â†‘"],Windows:["â†‘"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["â†“"],Windows:["â†“"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["â†"],Windows:["â†"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["â†’"],Windows:["â†’"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["âŒ˜","â†‘"],Windows:["Ctrl","â†‘"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["âŒ˜","â†“"],Windows:["Ctrl","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["â‡§","â†“"],Windows:["Shift","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["â‡§","â†‘"],Windows:["Shift","â†‘"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["â‡§","âŒ˜","â†“"],Windows:["Shift","Ctrl","â†“"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["â‡§","âŒ˜","â†‘"],Windows:["Shift","Ctrl","â†‘"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["âŒƒ","âŒ¥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["âŒƒ","âŒ¥","."],Windows:["Ctrl","Alt","."]}}],[e])},Yr=({open:e,onOpenChange:n})=>{const{t}=oe(),[s,r]=c.useState(""),l=Zr(),i=c.useMemo(()=>l.filter(o=>o.label.toLowerCase().includes(s.toLowerCase())),[s,l]);return d.jsxs(un,{open:e,onOpenChange:n,children:[d.jsx(dn,{asChild:!0,children:d.jsx(de,{size:"small",variant:"secondary",children:t("dataGrid.shortcuts.label")})}),d.jsxs(fn,{children:[d.jsx(hn,{className:q("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),d.jsxs(mn,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[d.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx(pn,{asChild:!0,children:d.jsx(gn,{children:t("app.menus.user.shortcuts")})}),d.jsx(vn,{className:"sr-only"})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsx(tt,{children:"esc"}),d.jsx(bn,{asChild:!0,children:d.jsx(wn,{variant:"transparent",size:"small",children:d.jsx(xn,{})})})]})]}),d.jsx("div",{children:d.jsx(Cn,{type:"search",value:s,autoFocus:!0,onChange:o=>r(o.target.value)})})]}),d.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:i.map((o,a)=>{var f;return d.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[d.jsx(yn,{size:"small",children:o.label}),d.jsx("div",{className:"flex items-center gap-x-1",children:(f=o.keys.Mac)==null?void 0:f.map((u,p)=>d.jsx("div",{className:"flex items-center gap-x-1",children:d.jsx(tt,{children:u})},p))})]},a)})})]})]})]})},Xr=40,Wt=e=>{const n=e.getIsPinned(),s=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:n?"sticky":"relative",width:e.getSize(),zIndex:n?1:0,borderBottom:n?`1px solid ${s}`:void 0,borderRight:n?`1px solid ${s}`:void 0,left:n==="left"?`${e.getStart("left")}px`:void 0,right:n==="right"?`${e.getAfter("right")}px`:void 0}},Qr=({data:e=[],columns:n,state:t,getSubRows:s,onEditingChange:r,disableInteractions:l,multiColumnSelection:i=!1})=>{var Je,qe;const o=c.useRef(null),{redo:a,undo:f,execute:u}=Ur(),{register:p,control:m,getValues:x,setValue:v,formState:{errors:h}}=t,[b,S]=c.useState(!0),y=!l&&b,[w,D]=c.useState(null),[_,O]=c.useState(null),[$,F]=c.useState(null),[T,U]=c.useState(!1),[Z,ee]=c.useState(!1),[te,ne]=c.useState(!1),[Y,L]=c.useState({}),[B,se]=c.useState({}),E=Dn({data:e,columns:n,initialState:{columnPinning:{left:[n[0].id]}},state:{columnVisibility:Y},onColumnVisibilityChange:L,getSubRows:s,getCoreRowModel:On(),defaultColumn:{size:200,maxSize:400}}),{flatRows:R}=E.getRowModel(),X=E.getAllFlatColumns(),Q=c.useMemo(()=>R.filter((k,N)=>(B==null?void 0:B[N])!==!1),[R,B]),g=E.getVisibleLeafColumns(),C=mt({count:Q.length,estimateSize:()=>Xr,getScrollElement:()=>o.current,overscan:5,rangeExtractor:k=>{const N=new Set(Array.from({length:k.endIndex-k.startIndex+1},(V,K)=>k.startIndex+K));return w&&Q[w.row]&&N.add(w.row),_&&Q[_.row]&&N.add(_.row),Array.from(N).sort((V,K)=>V-K)}}),I=C.getVirtualItems(),M=mt({count:g.length,estimateSize:k=>g[k].getSize(),getScrollElement:()=>o.current,horizontal:!0,overscan:3,rangeExtractor:k=>{const N=k.startIndex,V=k.endIndex,K=new Set(Array.from({length:V-N+1},(ae,H)=>N+H));return w&&g[w.col]&&K.add(w.col),_&&g[_.col]&&K.add(_.col),K.add(0),Array.from(K).sort((ae,H)=>ae-H)}}),j=M.getVirtualItems();let z,P;M&&(j!=null&&j.length)&&(z=((Je=j[0])==null?void 0:Je.start)??0,P=M.getTotalSize()-(((qe=j[j.length-1])==null?void 0:qe.end)??0));const A=c.useMemo(()=>new gr(R,n,i),[R,n,i]),J=$r(o),G=c.useCallback(k=>{D(k),O(k)},[]),{errorCount:Bt,isHighlighted:Lt,toggleErrorHighlighting:$e}=Sr(A,E,h),Ht=c.useCallback(()=>{$e(B,Y,se,L)},[$e,B,Y]),{columnOptions:Ut,handleToggleColumn:Ge,handleResetColumns:Zt,isDisabled:Yt}=yr(E,A),Xt=c.useCallback(k=>Ge(k),[Ge]),{navigateToField:Ve,scrollToCoordinates:ye}=Fr({matrix:A,queryTool:J,anchor:w,columnVirtualizer:M,rowVirtualizer:C,flatColumns:X,setColumnVisibility:L,setSingleRange:G,visibleColumns:g,visibleRows:Q}),{createSnapshot:_e,restoreSnapshot:Qt}=xr({matrix:A,form:t}),Se=c.useCallback(k=>{r&&r(k),k&&_e(w),ne(k)},[w,_e,r]),{getSelectionValues:Ee,setSelectionValues:Me}=Er({matrix:A,form:t,anchor:w}),{handleKeyDownEvent:ke,handleSpecialFocusKeys:Ke}=Pr({containerRef:o,matrix:A,queryTool:J,anchor:w,rangeEnd:_,isEditing:te,setTrapActive:S,setRangeEnd:O,getSelectionValues:Ee,getValues:x,setSelectionValues:Me,onEditingChangeHandler:Se,restoreSnapshot:Qt,createSnapshot:_e,setSingleRange:G,scrollToCoordinates:ye,execute:u,undo:f,redo:a,setValue:v}),{handleMouseUpEvent:Ie}=Rr({matrix:A,anchor:w,dragEnd:$,setDragEnd:F,isDragging:Z,setIsDragging:ee,setRangeEnd:O,setIsSelecting:U,getSelectionValues:Ee,setSelectionValues:Me,execute:u}),{handleCopyEvent:je,handlePasteEvent:De}=Cr({matrix:A,isEditing:te,anchor:w,rangeEnd:_,getSelectionValues:Ee,setSelectionValues:Me,execute:u}),{getWrapperFocusHandler:We,getInputChangeHandler:Be,getOverlayMouseDownHandler:Le,getWrapperMouseOverHandler:He,getIsCellDragSelected:Ue,getIsCellSelected:Ze,onDragToFillStart:Jt}=br({matrix:A,anchor:w,rangeEnd:_,setRangeEnd:O,isDragging:Z,setIsDragging:ee,isSelecting:T,setIsSelecting:U,setSingleRange:G,dragEnd:$,setDragEnd:F,setValue:v,execute:u,multiColumnSelection:i}),{getCellErrorMetadata:Ye,getCellMetadata:Xe}=wr({matrix:A});c.useEffect(()=>{if(y)return window.addEventListener("keydown",ke),window.addEventListener("mouseup",Ie),window.addEventListener("copy",je),window.addEventListener("paste",De),()=>{window.removeEventListener("keydown",ke),window.removeEventListener("mouseup",Ie),window.removeEventListener("copy",je),window.removeEventListener("paste",De)}},[y,ke,Ie,je,De]),c.useEffect(()=>{const k=N=>{if(Gt(N)){Ke(N);return}};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}},[Ke]);const qt=c.useCallback(k=>{k&&S(!1)},[]);c.useEffect(()=>{w&&(_||O(w))},[w,_]),c.useEffect(()=>{if(!w&&A){const k=A.getFirstNavigableCell();k&&G(k)}},[w,A,G]);const en=c.useMemo(()=>({anchor:w,control:m,trapActive:y,errors:h,setTrapActive:S,setIsSelecting:U,setIsEditing:Se,setSingleRange:G,setRangeEnd:O,getWrapperFocusHandler:We,getInputChangeHandler:Be,getOverlayMouseDownHandler:Le,getWrapperMouseOverHandler:He,register:p,getIsCellSelected:Ze,getIsCellDragSelected:Ue,getCellMetadata:Xe,getCellErrorMetadata:Ye,navigateToField:Ve}),[w,m,y,h,S,U,Se,G,O,We,Be,Le,He,p,Ze,Ue,Xe,Ye,Ve]),Qe=c.useCallback(()=>{w&&!y&&(S(!0),G(w),ye(w,"both"),requestAnimationFrame(()=>{var k;(k=J==null?void 0:J.getContainer(w))==null||k.focus()}))},[w,y,G,ye,J]);return d.jsx(Rt.Provider,{value:en,children:d.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[d.jsx(Jr,{columnOptions:Ut,isDisabled:Yt,onToggleColumn:Xt,errorCount:Bt,onToggleErrorHighlighting:Ht,onResetColumns:Zt,isHighlighted:Lt,onHeaderInteractionChange:qt}),d.jsx("div",{className:"size-full overflow-hidden",children:d.jsx("div",{ref:o,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:Qe,onClick:Qe,"data-container":!0,role:"application",children:d.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[d.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:E.getHeaderGroups().map(k=>d.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[z?d.jsx("div",{role:"presentation",style:{display:"flex",width:z}}):null,j.reduce((N,V,K,ae)=>{const H=k.headers[V.index],ce=ae[K-1];return ce&&V.index!==ce.index+1&&N.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${V.start-ce.end}px`}},`padding-${ce.index}-${V.index}`)),N.push(d.jsx("div",{role:"columnheader","data-column-index":V.index,style:{width:H.getSize(),...Wt(H.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:H.isPlaceholder?null:bt(H.column.columnDef.header,H.getContext())},H.id)),N},[]),P?d.jsx("div",{role:"presentation",style:{display:"flex",width:P}}):null]},k.id))}),d.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${C.getTotalSize()}px`},children:I.map(k=>{const N=Q[k.index],V=R.findIndex(K=>K.id===N.id);return d.jsx(el,{row:N,rowIndex:V,virtualRow:k,flatColumns:X,virtualColumns:j,anchor:w,virtualPaddingLeft:z,virtualPaddingRight:P,onDragToFillStart:Jt,multiColumnSelection:i},N.id)})})]})})})]})})},Jr=({columnOptions:e,isDisabled:n,onToggleColumn:t,onResetColumns:s,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:i,onHeaderInteractionChange:o})=>{const[a,f]=c.useState(!1),[u,p]=c.useState(!1),{t:m}=oe(),x=e.some(b=>!b.checked),v=b=>{o(b),f(b)},h=b=>{o(b),p(b)};return d.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[d.jsxs("div",{className:"flex items-center gap-x-2",children:[d.jsxs(ue,{open:u,onOpenChange:h,children:[d.jsx(cn,{showTooltip:n,content:m("dataGrid.columns.disabled"),children:d.jsx(ue.Trigger,{asChild:!0,disabled:n,children:d.jsxs(de,{size:"small",variant:"secondary",children:[x?d.jsx(Ct,{}):d.jsx(St,{}),m("dataGrid.columns.view")]})})}),d.jsx(ue.Content,{children:e.map((b,S)=>{const{checked:y,disabled:w,id:D,name:_}=b;return w?null:d.jsx(ue.CheckboxItem,{checked:y,onCheckedChange:t(S),onSelect:O=>O.preventDefault(),children:_},D)})})]}),x&&d.jsx(de,{size:"small",variant:"transparent",type:"button",onClick:s,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:m("dataGrid.columns.resetToDefault")})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&d.jsxs(de,{size:"small",variant:"secondary",type:"button",onClick:i,className:q({"bg-ui-button-neutral-pressed":r}),children:[d.jsx(vt,{className:"text-ui-fg-subtle"}),d.jsx("span",{children:m("dataGrid.errors.count",{count:l})})]}),d.jsx(Yr,{open:a,onOpenChange:v})]})]})},qr=({cell:e,columnIndex:n,rowIndex:t,anchor:s,onDragToFillStart:r,multiColumnSelection:l})=>{const o=$t({row:t,col:n},s);return d.jsx("div",{role:"gridcell","aria-rowindex":t,"aria-colindex":n,style:{width:e.column.getSize(),...Wt(e.column)},"data-row-index":t,"data-column-index":n,className:q("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:d.jsxs("div",{className:"relative h-full w-full",children:[bt(e.column.columnDef.cell,{...e.getContext(),columnIndex:n,rowIndex:t}),o&&d.jsx("div",{onMouseDown:r,className:q("bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize",{"cursor-nwse-resize":l})})]})})},el=({row:e,rowIndex:n,virtualRow:t,virtualPaddingLeft:s,virtualPaddingRight:r,virtualColumns:l,flatColumns:i,anchor:o,onDragToFillStart:a,multiColumnSelection:f})=>{const u=e.getVisibleCells();return d.jsxs("div",{role:"row","aria-rowindex":t.index,style:{transform:`translateY(${t.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[s?d.jsx("div",{role:"presentation",style:{display:"flex",width:s}}):null,l.reduce((p,m,x,v)=>{const h=u[m.index],b=h.column,S=i.findIndex(w=>w.id===b.id),y=v[x-1];return y&&m.index!==y.index+1&&p.push(d.jsx("div",{role:"presentation",style:{display:"flex",width:`${m.start-y.end}px`}},`padding-${y.index}-${m.index}`)),p.push(d.jsx(qr,{cell:h,columnIndex:S,rowIndex:n,anchor:o,onDragToFillStart:a,multiColumnSelection:f},h.id)),p},[]),r?d.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},tl=({context:e})=>{const{field:n,control:t,renderProps:s}=xe({context:e}),r=ie({context:e}),{container:l,input:i}=s;return d.jsx(be,{control:t,name:n,render:({field:o})=>d.jsx(Ce,{...l,...r,children:d.jsx(nl,{field:o,inputProps:i})})})},nl=({field:e,inputProps:n})=>{const{onChange:t,onBlur:s,ref:r,value:l,...i}=e,{ref:o,onBlur:a,onChange:f,...u}=n,[p,m]=c.useState(l);c.useEffect(()=>{m(l)},[l]);const x=we(o,r);return d.jsx("input",{className:q("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:p,onChange:v=>m(v.target.value),ref:x,onBlur:()=>{s(),a(),f(p,l)},...u,...i})},sl=({isLoading:e,...n})=>{var t;return e?d.jsx(ur,{columns:n.columns,rows:(t=n.data)!=null&&t.length&&n.data.length>0?n.data.length:10}):d.jsx(Qr,{...n})},fl=Object.assign(sl,{BooleanCell:Kr,TextCell:tl,NumberCell:Lr,CurrencyCell:ze,ReadonlyCell:Ae});function rl(){const e=jn();return{column:({id:n,name:t,header:s,cell:r,disableHiding:l=!1,field:i,type:o})=>e.display({id:n,header:s,cell:r,enableHiding:!l,meta:{name:t,field:i,type:o}})}}var pt=({includesTax:e})=>{const{t:n}=oe();return d.jsx(Pe,{maxWidth:999,content:n(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:e?d.jsx(Dt,{className:"text-ui-fg-muted shrink-0"}):d.jsx(kt,{className:"text-ui-fg-muted shrink-0"})})},hl=({currencies:e,regions:n,pricePreferences:t,isReadyOnly:s,getFieldName:r,t:l})=>{const i=rl();return[...(e==null?void 0:e.map(o=>{const a=t==null?void 0:t.find(u=>u.attribute==="currency_code"&&u.value===o),f=l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()});return i.column({id:`currency_prices.${o}`,name:l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),field:u=>(s==null?void 0:s(u))?null:r(u,o),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:f,children:f}),d.jsx(pt,{includesTax:a==null?void 0:a.is_tax_inclusive})]}),cell:u=>s!=null&&s(u)?d.jsx(Ae,{context:u}):d.jsx(ze,{code:o,context:u})})}))??[],...(n==null?void 0:n.map(o=>{const a=t==null?void 0:t.find(u=>u.attribute==="region_id"&&u.value===o.id),f=l("fields.priceTemplate",{regionOrCurrency:o.name});return i.column({id:`region_prices.${o.id}`,name:l("fields.priceTemplate",{regionOrCurrency:o.name}),field:u=>(s==null?void 0:s(u))?null:r(u,o.id),type:"number",header:()=>d.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[d.jsx("span",{className:"truncate",title:f,children:f}),d.jsx(pt,{includesTax:a==null?void 0:a.is_tax_inclusive})]}),cell:u=>s!=null&&s(u)?d.jsx(Ae,{context:u}):(e==null?void 0:e.find(m=>m===o.currency_code))?d.jsx(ze,{code:o.currency_code,context:u}):null})}))??[]]};export{fl as D,pt as I,hl as a,ur as b,rl as c,Ae as d,xe as e,ie as f,Ce as g,we as h,dl as u};
